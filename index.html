<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Webneva ‚Äì Skapa din hemsida med AI</title>
  <link rel="icon" href="images/bgk-remove.webneva.png" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: {
              50: '#f5f7ff',
              100: '#e0e7ff',
              500: '#3c81ff',
              600: '#2d66e0',
              700: '#244fb4',
              900: '#1b387f'
            }
          }
        }
      }
    }
  </script>
  <style>
    .glass {
      background: rgba(255,255,255,.85);
      backdrop-filter: blur(10px) saturate(120%);
    }
    .fade-enter { opacity: 0; transform: translateY(20px); transition: all .4s; }
    .fade-enter-active { opacity: 1; transform: translateY(0); }
  </style>
</head>
<body class="bg-gradient-to-br from-slate-50 via-slate-100 to-slate-200 min-h-screen text-slate-900">

  <!-- Header -->
  <header class="sticky top-0 bg-white/80 backdrop-blur z-40 border-b border-slate-200">
    <div class="max-w-7xl mx-auto px-6 py-3 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <img src="images/bgk-remove.webneva.png" class="h-10" alt="Webneva">
        <h1 class="text-2xl font-black">Webneva <span class="text-brand-600">Studio</span></h1>
      </div>
      <a href="/studio" class="bg-brand-600 text-white px-4 py-2 rounded-full text-sm font-semibold shadow hover:bg-brand-700">G√• till Studio</a>
    </div>
  </header>

  <!-- Hero -->
  <section class="py-20 text-center">
    <h2 class="text-4xl font-extrabold">‚ú® Skapa din hemsida med <span class="text-brand-600">AI</span></h2>
    <p class="mt-4 text-lg text-slate-600">Svara p√• n√•gra snabba fr√•gor s√• genererar Webneva en professionell webbsida √•t dig.</p>
    <button id="startQuiz" class="mt-8 bg-brand-600 text-white px-6 py-3 rounded-full font-semibold shadow hover:bg-brand-700 transition">üöÄ Starta quiz</button>
  </section>

  <!-- Quiz Modal -->
  <div id="quizContainer" class="fixed inset-0 bg-black/60 hidden items-center justify-center z-50">
    <div class="glass w-full max-w-3xl p-6 rounded-3xl shadow-2xl text-center relative">
      <button id="closeQuiz" class="absolute top-3 right-5 text-2xl text-slate-500 hover:text-slate-700">&times;</button>

      <div id="progress" class="h-2 bg-slate-200 rounded-full overflow-hidden mb-5">
        <div id="progressBar" class="h-full bg-brand-600 w-0 transition-all duration-500"></div>
      </div>

      <h3 id="quizTitle" class="text-2xl font-bold mb-4">Vad vill du g√∂ra?</h3>
      <div id="quizContent" class="space-y-4"></div>

      <div class="mt-6 flex justify-between">
        <button id="prevBtn" class="px-4 py-2 rounded-lg border border-slate-300 text-sm font-semibold hover:bg-white">‚¨ÖÔ∏è Tillbaka</button>
        <button id="nextBtn" class="px-4 py-2 rounded-lg bg-brand-600 text-white text-sm font-semibold hover:bg-brand-700">N√§sta ‚û°Ô∏è</button>
      </div>
    </div>
  </div>

  <script>
    const quizSteps = [
      {
        title: "Vad vill du g√∂ra?",
        options: [
          { text: "üÜï Skapa en ny hemsida", value: "generate" },
          { text: "üõ†Ô∏è F√∂rb√§ttra min kod", value: "improve" }
        ],
        type: "choice"
      },
      {
        title: "Vilken typ av hemsida ska du skapa?",
        options: [
          { text: "üçù Restaurang", value: "restaurang" },
          { text: "üõí E-handel", value: "ehandel" },
          { text: "üé® Portfolio", value: "portfolio" },
          { text: "üì∞ Blogg", value: "blogg" },
          { text: "üè¢ F√∂retagssida", value: "f√∂retag" }
        ],
        type: "choice"
      },
      {
        title: "Vad √§r m√•let med din sida?",
        type: "text",
        placeholder: "Ex: F√• kunder att boka bord, s√§lja produkter..."
      },
      {
        title: "Vilka f√§rger eller stil ska sidan ha?",
        type: "text",
        placeholder: "Ex: m√∂rkbl√• och guld, minimalistisk, modern..."
      },
      {
        title: "Vilka undersidor vill du ha?",
        type: "text",
        placeholder: "Ex: start, om oss, kontakt, meny..."
      },
      {
        title: "Har du redan kod du vill f√∂rb√§ttra?",
        type: "textarea",
        optional: true,
        placeholder: "Klistra in din HTML/CSS/JS h√§r (om du vill f√∂rb√§ttra en sida)..."
      }
    ];

    const quizContainer = document.getElementById("quizContainer");
    const quizContent = document.getElementById("quizContent");
    const quizTitle = document.getElementById("quizTitle");
    const progressBar = document.getElementById("progressBar");
    const nextBtn = document.getElementById("nextBtn");
    const prevBtn = document.getElementById("prevBtn");

    let step = 0;
    const answers = {};

    document.getElementById("startQuiz").onclick = () => {
      quizContainer.classList.remove("hidden");
      quizContainer.classList.add("flex");
      renderStep();
    };

    document.getElementById("closeQuiz").onclick = () => {
      quizContainer.classList.add("hidden");
      quizContainer.classList.remove("flex");
    };

    nextBtn.onclick = () => {
      saveAnswer();
      if (step < quizSteps.length - 1) {
        step++;
        renderStep();
      } else {
        finishQuiz();
      }
    };

    prevBtn.onclick = () => {
      if (step > 0) {
        step--;
        renderStep();
      }
    };

    function renderStep() {
      const s = quizSteps[step];
      quizTitle.textContent = s.title;
      progressBar.style.width = `${((step+1)/quizSteps.length)*100}%`;

      quizContent.innerHTML = "";
      if (s.type === "choice") {
        s.options.forEach(opt => {
          const btn = document.createElement("button");
          btn.className = "block w-full border border-slate-300 hover:bg-slate-100 rounded-xl p-3 text-lg";
          btn.textContent = opt.text;
          btn.onclick = () => { answers[step] = opt.value; nextBtn.click(); };
          quizContent.appendChild(btn);
        });
        nextBtn.classList.add("hidden");
      } else if (s.type === "text" || s.type === "textarea") {
        nextBtn.classList.remove("hidden");
        const input = s.type === "textarea" ? document.createElement("textarea") : document.createElement("input");
        input.className = "w-full border border-slate-300 rounded-xl p-3 text-sm";
        input.placeholder = s.placeholder || "";
        if (s.type === "textarea") input.rows = 4;
        quizContent.appendChild(input);
      }
      prevBtn.style.visibility = step === 0 ? "hidden" : "visible";
    }

    function saveAnswer() {
      const s = quizSteps[step];
      if (s.type === "text" || s.type === "textarea") {
        const input = quizContent.querySelector("input, textarea");
        answers[step] = input?.value?.trim() || "";
      }
    }

    function finishQuiz() {
      const [mode, niche, goal, colors, pages, code] = [
        answers[0] || "generate",
        answers[1] || "",
        answers[2] || "",
        answers[3] || "",
        answers[4] || "",
        answers[5] || ""
      ];
      const prompt = `Skapa en ${niche} hemsida. M√•l: ${goal}. F√§rgtema: ${colors}. Sidor: ${pages}. Modern och responsiv.`;

      const params = new URLSearchParams({
        mode,
        prompt,
        pages,
        colors,
        hasCode: code ? '1' : '0'
      });
      if (code) params.set('code', btoa(unescape(encodeURIComponent(code))));
      window.location.href = `/studio?${params.toString()}`;
    }
  </script>
</body>
</html>
