<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Webneva – Skapa med AI</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root {
      --bg: #0b1120;
      --panel: rgba(255,255,255,.05);
      --border: rgba(255,255,255,.1);
      --blue: #3b82f6;
    }
    body { background: var(--bg); color: #e5e7eb; font-family: Inter, sans-serif; }
    .glass { background: var(--panel); border: 1px solid var(--border); backdrop-filter: blur(18px); }
    .btn { border: 1px solid var(--border); border-radius: 10px; padding: .6rem 1.2rem; font-weight: 600; }
    .btn:hover { background: rgba(255,255,255,.05); }
    .btn-primary { background: var(--blue); border-color: var(--blue); color: white; }
  </style>
</head>
<body class="h-screen flex items-center justify-center">
  <div id="wizard" class="glass rounded-2xl p-8 w-[90%] max-w-md">
    <h1 class="text-2xl font-bold mb-1 text-white">Skapa ny hemsida</h1>
    <p class="text-slate-400 text-sm mb-6">AI guidar dig genom några enkla steg.</p>

    <div id="step">
      <!-- Frågor kommer här -->
    </div>

    <div class="flex justify-between mt-6">
      <button id="backBtn" class="btn">Tillbaka</button>
      <button id="nextBtn" class="btn btn-primary">Nästa</button>
    </div>
  </div>

  <script>
    const SETUP_KEY = "WEBNEVA_SETUP_V1";
    const step = document.getElementById("step");
    const next = document.getElementById("nextBtn");
    const back = document.getElementById("backBtn");

    let i = 0;
    const answers = {};
    const questions = [
      { id: "topic", label: "Vad ska webbplatsen handla om?", type: "text", placeholder: "Portfolio, företag, restaurang…" },
      { id: "pages", label: "Vilka sidor ska den innehålla?", type: "chips", options: ["Startsida", "Tjänster", "Kontakt", "Om oss", "Blogg", "Galleri"] },
      { id: "style", label: "Vilken stil vill du ha?", type: "select", options: ["Modern & minimalistisk", "Färgstark & kreativ", "Mörk & lyxig", "Ren & professionell"] }
    ];

    function render() {
      const q = questions[i];
      step.innerHTML = `<label class="block text-sm mb-2 text-slate-300">${q.label}</label>`;
      let el;
      if (q.type === "text") {
        el = document.createElement("input");
        el.type = "text";
        el.placeholder = q.placeholder;
        el.className = "w-full rounded-lg bg-[#0f172a] text-white border border-[var(--border)] px-4 py-3";
        el.value = answers[q.id] || "";
        step.appendChild(el);
      } else if (q.type === "chips") {
        el = document.createElement("div");
        el.className = "flex flex-wrap gap-2";
        q.options.forEach(opt => {
          const b = document.createElement("button");
          b.textContent = opt;
          b.className = "px-3 py-2 rounded-lg border border-[var(--border)] hover:border-blue-500 text-sm";
          if ((answers[q.id] || []).includes(opt)) b.classList.add("border-blue-500", "bg-blue-500/10");
          b.onclick = () => {
            const set = new Set(answers[q.id] || []);
            set.has(opt) ? set.delete(opt) : set.add(opt);
            answers[q.id] = Array.from(set);
            render();
          };
          el.appendChild(b);
        });
        step.appendChild(el);
      } else if (q.type === "select") {
        el = document.createElement("select");
        el.className = "w-full rounded-lg bg-[#0f172a] text-white border border-[var(--border)] px-4 py-3";
        q.options.forEach(opt => {
          const optEl = document.createElement("option");
          optEl.textContent = opt;
          el.appendChild(optEl);
        });
        el.value = answers[q.id] || q.options[0];
        step.appendChild(el);
      }
      back.disabled = i === 0;
      next.textContent = i === questions.length - 1 ? "Starta Studio" : "Nästa";
      next.onclick = () => {
        if (q.type === "chips") {
          // redan sparad i klick
        } else answers[q.id] = el.value.trim();
        if (i < questions.length - 1) { i++; render(); }
        else finish();
      };
      back.onclick = () => { if (i > 0) { i--; render(); } };
    }

    function finish() {
      const setup = { mode: "create", answers, autoRun: true, timestamp: Date.now() };
      localStorage.setItem(SETUP_KEY, JSON.stringify(setup));
      window.location.href = "studio.html";
    }

    render();
  </script>
</body>
</html>
